<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<title>Install the iSphere Library</title>
</head>

<body>
	<h1>Install the iSphere Library</h1>
	<p>
		You need to install the iSphere Library on which many of the iSphere
		plug-ins rely. The recommended way, and the one that requires the
		least effort, is the <i>Integrated Upload Feature</i>. You can also
		install the library manually.
	<p>
	<table>
		<tr>
			<td class="notice">Note: The library is saved for V7R1, so you cannot use the 
			                   Integrated Upload Feature if you are on an earlier release. 
			                   The library can be compiled for V6R1, but you need to do 
			                   that by yourself, using an i Project. (V7R1 is the earliest 
			                   release the iSphere developers can save the library for.)</td>
		</tr>
	</table>
	<p>
	<table>
		<tr>
			<td class="important">Important: We are sorry to let you know that we no 
			   longer have an option to create the iSphere library for V6R1. Version 
			   3.5.4.r was the last release with a V6R1 library. All newer versions will 
			   be compiled for V7R1. Please refer to 
			   <a href="#using_iproject">Using an i Project</a> to read how to install 
			   the library from an i Project.</td>
		</tr>
	</table>
	<p>Select the option that works best for you:
	<p>
	<table>
		<tr>
			<td><a href="#integrated_upload">Using the Integrated Upload
					Feature</a></td>
		</tr>
		<tr>
			<td><a href="#by_hand">Doing it By Hand</a></td>
		</tr>
		<tr>
			<td><a href="#using_iproject">Using an i Project</a> (no FTP)</td>
		</tr>
	</table>
	<p>
		<a id="integrated_upload"></a>
	<h2>Using the Integrated Upload Feature</h2>
	<ul>
		<li>Start RDi 9.5.1.3+.</li>
		<li>Click on "Windows / Preferences".</li>
		<li>Expand item "iSphere".</li>
		<li>Click "Library".</li>
		<li>In &quot;Host name:&quot; enter the name of an IBM i host
			system that is configured as a <i>Remote System</i> in the <i>Remote System Explorer</i> view.<br>
			Review the &quot;FTP port number&quot; and the name of the &quot;iSphere
			library&quot;. The default FTP port is 21. The default library name is
			ISPHERE.<br>
			<b>Note:</b> You may use another library name, but be aware
			that this library will be <b>deleted</b> if it exists.
		<li>Verify the ASP group. The name of the ASP group is used for parameter <i>RSTASPDEV</i>
		    of command <i>RSTLIB</i> when restoring the iSphere library. The possible values are:<p>
		    <table>
		    <tr><td nowrap valign="top">*NONE</td><td valign="top">-</td><td valign="top">The DLTLIB and RSTLIB commands are executed without the ASPDEV and RSTASPDEV parameters.</td></tr>
		    <tr><td nowrap valign="top">asp-device-name</td><td valign="top">-</td><td valign="top">The DLTLIB command is executed with ASPDEV(*) and the RSTLIB command is extended with RSTASPDEV(asp-device-name).</td></tr>
		    </table>
		    <p>
		</li>
		<li>Verify the system CCSID. The system CCSID is used when validating object names.</li>
		<li>Click the [Transfer iSphere library] button.</li>
		<li>Use the refresh button to retrieve the version of the iSphere library. Once
		    pressed, the version is automatically updated as the library name changes.
		    Auto-update is disabled, when the host name is changed.</li>
		<p>
		<table>
			<tr>
				<td class="info">Use the "System Ccsid" field to specify the CCSID of your system. The value
				                 specified here is used for validating object names.</td>
			</tr>
		</table>
			<p>
				<img src="./assets/library.png" />
			<p>(The screenshot above is from RDi, but the WDSC screen is very
				similar.)
			<p>
		</li>
		<li>On the following &quot;Transfer iSphere library&quot; dialog,
			click [Start Transfer] to start the FTP transfer.<br>
			Use the <i>ASP device name</i> parameter to specify the
			name of the ASP device for restoring the library.
			<p>
			<table>
			<tr><td nowrap valign="top">*DFAULT</td><td valign="top">-</td><td valign="top">The DLTLIB and RSTLIB commands are executed without the ASPDEV and RSTASPDEV parameters.</td></tr>
			<tr><td nowrap valign="top">asp-device-name</td><td valign="top">-</td><td valign="top">The DLTLIB command is executed with ASPDEV(*) and the RSTLIB command is extended with RSTASPDEV(asp-device-name).</td></tr>
			</table>
			<p>
				<img src="./assets/transfer_start.png" />
			<p>
		</li>
		<li>If the iSphere library already exists, you will be asked to
			confirm that you want to delete it:
			<p>
				<img src="./assets/delete_lib.gif" />
			<p>
		</li>

		<li>The transfer will start and the steps will be displayed in
			the window as the transfer runs.</li>
		<li>At the end of the transfer request a [Print job log] button will
			appear:
			<p>
				<img src="./assets/transfer_end.png" />
			<p>
		</li>
		<p>
		<li>Review the contents of the window to check, whether the library has been
		    successfully installed. If you need to report errors, use the context menu
			to copy all messages to the clipboard and click the [Print job log] button
			to print a job log on the host. Use the [Close] button to close the dialog.
			<p>
			Alternatively you can use <i>CTRL-A</i> to select all messages and 
			<i>CTRL-C</i> to copy the selected messages to the clipboard.
		</li>
	</ul>
	<p>
	<table>
		<tr>
			<td class="info">Use the <a href="/help/topic/biz.isphere.core.help/html/connection/properties.html">connection properties</a>
			                 to specify a different iSphere library for certain connections.</td>
		</tr>
	</table>
	<p>
	<a id="by_hand"></a>
	<h2>Doing it By Hand</h2>
	<p>
	There are two options for uploading the library by hand: FTP and IFS<br>
	For both options you start with retrieving the save file from the plug-in jar file.
	<p>
	<h3>1. Retrieving the save file from the plug-in</h3>
	<ul>
	<li>Download the iSphere update site zip file from <a
		href="https://ibm-i-isphere.github.io/isphere/files/" target=_blank>SourceForge</a>.
	</li>
	<li>Unzip the content of the zip file into a directory of your
		choice of your hard disk.</li>
	<li>Navigate into directory <i>/plugins</i>.
		<p><img src="./assets/iSphere_unzipped.png" /><p>
	</li>
	<li>Rename biz.isphere.core_x.x.x.<i>jar</i> to
		biz.isphere.core_x.x.x.<i>zip</i>. It is the largest .jar file in the
		directory. Right click &gt; Rename or F2.
	</li>
	<li>Unzip biz.isphere.core_x.x.x.zip
		<p><img src="./assets/iSphere_core_unzipped.png" /><p>
	</li>
	<li>Navigate into directory <i>biz.isphere.core_x.x.x/Server</i>
		<p><img src="./assets/iSphere_Server.png" /><p>
	</li>
	<li>Copy file <i>ISPHERE</i> into a directory of your choice of
		your hard disk. This is the save file you will need to transfer to
		IBM i. It's easier to copy it to a directory with a short path rather
		than typing a long path into the FTP command window below.
	</li>
	<li>Switch to a 5250 session.</li>
	<li>Create an empty save file in QGPL:
		<p><div class="code">CRTSAVF FILE(QGPL/ISPHERE) TEXT('iSphere')</div><p>
	</li>
	</ul>
	<p>
	Now decide whether you want to upload the save file with FTP or via the IFS. Choose 
	option 2.a for FTP and option 2.b for IFS. 
	<p>
	<h3>2.a Uploading save file with FTP</h3>
	<ul>
	<li>Back at the PC, open a command window, start an FTP session
		and transfer the local <i>ISPHERE</i> file into the <i>ISPHERE</i>
		save file on your host using <u><b>binary</b></u> mode. The following
		example uses <i>NAMEFMT 0</i> (OS/400 File Naming Convention), but of 
		course you can also use <i>NAMEFMT 1</i> (OS/400 Integrated File System 
		Naming Format).
		<p><img src="./assets/ftp_upload.png" /><p>
	</li>
	</ul>
	<p>
	<h3>2.b Uploading save file via IFS</h3>
	<ul>
	<li>Back at the PC, copy save file <i>ISPHERE.SAVF</i> to a folder on your IBM i.
		<p><img src="./assets/ifs_upload.png" /><p>
	</li>
	<li>Switch to a 5250 session.</li>
	<li>Copy the save file from the IFS into the save file previously created:
		<p><div class="code">CPYFRMSTMF FROMSTMF('/home/Temp/isphere.savf')<br>
		                     TOMBR('/qsys.lib/qgpl.lib/isphere.file') MBROPT(*REPLACE)</div><p>
	</li>
	</ul>
	<p>
	<h3>3. Restoring library ISPHERE</h3>
	<ul>
	<li>On the 5250 session, restore library ISPHERE from the save
		file <i>QGPL/ISPHERE</i>:
		<p>
		<div class="code">RSTLIB SAVLIB(ISPHERE) DEV(*SAVF)
			SAVF(QGPL/ISPHERE) RSTLIB(ISPHERE)</div>
		</p>
	</li>
	<li>Now we need to clean up our PC directory. Go back to Windows
		Explorer to the <i>/plugins</i> directory.
		<p>
			<img src="./assets/iSphere_plugins_altered.png" />
		<p></p>
	</li>
	<li>Delete the biz.isphere.core_x.x.x directory <i>NOT the jar
			file!</i>
		<p>
			<img src="./assets/iSphere_plugins_altered_delete_dir.png" />
		<p></p></li>
	<li>Rename biz.isphere.core_x.x.x.zip back to
		biz.isphere.core_x.x.x.jar It is the largest file in the directory,
		and the only .zip file there. Right click > Rename or F2.
		<p>
			<img src="./assets/iSphere_plugins_altered_rename_zip.png" />
		<p></p>
	</li>
	<li>When finished, the <i>/plugins</i> directory should have
		only.jar files in it:
		<p>
			<img src="./assets/iSphere_plugins_typical.png" />
		<p></p></li>
	</ul>
	<p>
		<br> <a id="using_iproject"></a>
	<h2>Using an i Project</h2>
	<p>
		If you cannot use FTP to install the iSphere library, you can try to
		do it with an i Project from RDi or WDSCi. First you need to copy the
		<i>iSphere</i> project from the repository to your workspace. You may
		either connect to SourceForge and check out the project directly from
		the repository or download a snapshot of the repository to your PC and
		import the <i>iSphere</i> project from there.
	<p>
		Please refer to <a
			href="../contributions/setup/setup_isphere.html#host_project">The
			iSphere Host Project</a> to learn how to checkout the project from
		SourceForge using SVN.
	<p>
		For the latter option, go to the <a
			href="https://github.com/rdi-open-source/isphere/">iSphere project
			home</a> at GitHub and click <i>Download Zip</i> from the green button:
	<p>
		<img src="./assets/download_button.png" />
	<p>
		Then click extract the content of the zip file to an empty folder on
		your computer.
	<p>
		Open RDi and switch to the <i>i Projects</i> perspective. Select <i>File
			-&gt; Import... -&gt; General -&gt; Existing Projects into Workspace</i>
		and click <i>Next</i>. Then choose option <i>Select root directory</i>
		and click <i>Browse</i> to select the folder. Click <i>Deselect
			All</i> and reselect project <i>iSphere</i>. Click <i>Finish</i> to
		import the project to your workspace.
	<p>
		<img src="./assets/isphere_iproject.png" />
	<p>
		Eventually build the iSphere library as described in <a
			href="../contributions/build/build_isphere.html#library_build">Library
			Build</a>.
	<p>
		<iframe src="../copyright.html" width="100%" frameborder="0"
			marginheight="0" marginwidth="0"></iframe>
</body>
</html>